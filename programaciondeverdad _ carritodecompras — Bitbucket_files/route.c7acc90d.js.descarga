!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequirecbf3;r.register("jpuQb",(function(t,n){e(t.exports,"default",(function(){return r("jDgGJ").default}));r("jDgGJ")})),r.register("jDgGJ",(function(n,s){e(n.exports,"default",(function(){return R}));var a=r("fPPqr"),o=r("9nHZC"),i=r("agjvf"),l=r("3THTN"),f=r("4cpJW"),d=r("dWDB7"),c=r("93cMI"),u=r("a7iuM"),p=r("4tAgz"),g=r("f1hQX"),h=r("4Bjdx"),m=r("5PXri");class S extends o.PureComponent{constructor(...e){super(...e),this.state={isOpen:!1},this.handleClose=()=>this.setState({isOpen:!1}),this.handleRefSelected=e=>{this.setState({isOpen:!1}),this.props.onChange(e)},this.renderTrigger=e=>{const{isOpen:r}=this.state,{intl:n,label:s}=this.props,c=s||t(o).createElement(i.FormattedMessage,m.default.noRefSelected);return t(o).createElement(u.default,{content:c,tag:"p",position:"top"},t(o).createElement(l.default,t(a)({},e,{isSelected:r,iconBefore:t(o).createElement(t(f),{size:"medium",label:""}),iconAfter:t(o).createElement(t(d),{label:""}),testId:"ref-selector-trigger",onClick:()=>{this.toggle()}}),t(o).createElement(p.ScreenReadersOnly,null,n.formatMessage(m.default.refSourceLabel)),c))}}toggle(){this.state.isOpen||this.props.onOpen(),this.setState((e=>({isOpen:!e.isOpen})))}render(){const{renderRef:e,repository:r}=this.props,{isOpen:n}=this.state;return t(o).createElement(g.RefSelectorWrapper,{"data-qa":"ref-selector"},t(o).createElement(g.InlineDialogWrapper,null,t(o).createElement(c.Popup,{isOpen:n,onClose:this.handleClose,placement:"bottom-start",trigger:this.renderTrigger,content:({setInitialFocusRef:n})=>t(o).createElement(g.PopupContentWrapper,null,t(o).createElement(h.default,{onRefSelected:this.handleRefSelected,renderRef:e,repository:r,setInitialFocusRef:n}))})))}}S.defaultProps={onChange:()=>{},onOpen:()=>{}};var R=(0,i.injectIntl)(S)})),r.register("f1hQX",(function(t,n){e(t.exports,"Filter",(function(){return l})),e(t.exports,"RefLink",(function(){return f})),e(t.exports,"RefSelectorPanel",(function(){return d})),e(t.exports,"InlineDialogWrapper",(function(){return c})),e(t.exports,"PopupContentWrapper",(function(){return u})),e(t.exports,"RefSelectorWrapper",(function(){return p}));var s=r("2xJU3"),a=r("aP6k3"),o=r("3UVNu"),i=r("aurzp");const l=(0,s.default)("div",{target:"e1tv17y60"})("margin-bottom:",(0,a.gridSize)(),"px;padding-left:",(0,a.gridSize)(),"px;padding-right:",(0,a.gridSize)(),"px;"),f=(0,s.default)(i.ComponentLinkProxy,{target:"e1tv17y61"})({name:"1tmlw65",styles:"padding:6px 0;line-height:initial;"}),d=(0,s.default)("div",{target:"e1tv17y62"})("width:",44*(0,a.gridSize)(),"px;",o.media.upToSmall("\n    width: 300px;\n  "),""),c=(0,s.default)("div",{target:"e1tv17y63"})("& > div{padding:",2*(0,a.gridSize)(),"px ",2*(0,a.gridSize)(),"px 0;}"),u=(0,s.default)("div",{target:"e1tv17y64"})("padding:",2*(0,a.gridSize)(),"px ",2*(0,a.gridSize)(),"px 0;"),p=(0,s.default)("div",{target:"e1tv17y65"})({name:"139lh2g",styles:"max-width:fit-content;width:calc(100% - 200px);"})})),r.register("4Bjdx",(function(n,s){e(n.exports,"default",(function(){return S}));var a=r("9nHZC"),o=r("62zzi"),i=r("agjvf"),l=r("8Mlkh"),f=r("6kNkE"),d=r("g7ZmP"),c=r("gHKyL"),u=r("3izMR"),p=r("5SAu6"),g=r("5PXri"),h=r("f1hQX");class m extends t(a).PureComponent{constructor(...e){super(...e),this.state={filter:"",selectedTabIndex:0},this.handleFilterChange=(0,o.default)((e=>this.setState({filter:e})),200),this.onTabSelected=e=>{this.setState({selectedTabIndex:e})},this.placeholders=[this.props.intl.formatMessage(g.default.filterBranches),this.props.intl.formatMessage(g.default.filterTags)]}render(){const{selectedTabIndex:e,filter:r}=this.state,{intl:n,onRefSelected:s,renderRef:o,repository:i,setInitialFocusRef:m}=this.props;return t(a).createElement(h.RefSelectorPanel,null,t(a).createElement(h.Filter,null,t(a).createElement(u.default,{ref:m,"aria-label":`${this.placeholders[e]}`,onChange:e=>{this.handleFilterChange(e.target.value)},placeholder:this.placeholders[e]})),t(a).createElement(l.default,{id:"ref-selector-tabs",onChange:this.onTabSelected,selected:e},t(a).createElement(d.default,null,t(a).createElement(f.default,null,n.formatMessage(g.default.branchesTab)),t(a).createElement(f.default,null,n.formatMessage(g.default.tagsTab))),t(a).createElement(c.default,null,t(a).createElement(p.default,{filter:r,onRefSelected:s,renderRef:o,repository:i,type:"branch"})),t(a).createElement(c.default,null,t(a).createElement(p.default,{filter:r,onRefSelected:s,renderRef:o,repository:i,type:"tag"}))))}}var S=(0,i.injectIntl)(m)})),r.register("5SAu6",(function(t,n){e(t.exports,"default",(function(){return i}));var s=r("dGzLf"),a=r("aanBq"),o=r("fCXbu");var i=(0,s.connect)((e=>({mainRef:(0,a.getRepositoryMainBranch)(e),branchingModel:(0,a.getRepositoryBranchingModel)(e)})))(o.default)})),r.register("fCXbu",(function(n,s){e(n.exports,"default",(function(){return l}));var a=r("9nHZC"),o=r("5mZOL"),i=r("fyvjM");class l extends a.PureComponent{constructor(...e){super(...e),this.state={isLoading:!1,refs:[],nextPageUrl:null},this.fetchRefs=(e,t,r,n,s)=>{const{full_name:a}=e,o=(0,i.generateRefUrl)(a,t,r,n,s);this.fetchRefsFromUrl(o,!0)},this.onLoadMorePages=e=>{this.fetchRefsFromUrl(e,!1)},this.fetchRefsFromUrl=async(e,t)=>{this.setState({isLoading:!0});const{refs:r}=this.state,{type:n,mainRef:s,branchingModel:a,filter:o}=this.props;try{const{next:l,preparedRefs:f}=await(0,i.fetchRefOptions)(e,t,o,n,s,a);this.setState({isLoading:!1,nextPageUrl:l,refs:t?f:r.concat(f)})}catch(e){}},this.shouldShowRef=e=>{const{filter:t}=this.props;return!(!e||!e.name)&&e.name.includes(t)}}componentDidMount(){const{filter:e,repository:t,type:r,mainRef:n,branchingModel:s}=this.props;this.fetchRefs(t,e,r,n,s)}UNSAFE_componentWillReceiveProps(e){const{filter:t,repository:r,type:n,mainRef:s,branchingModel:a}=e;t===this.props.filter&&n===this.props.type&&(!r||this.props.repository&&this.props.repository.uuid===r.uuid)||this.fetchRefs(r,t,n,s,a),this.props.type!==n&&this.setState({refs:[]})}render(){const{onRefSelected:e,renderRef:r,type:n,filter:s}=this.props,{isLoading:i,refs:l,nextPageUrl:f}=this.state,d="tag"===n&&""!==s;return t(a).createElement(o.default,{nextPageUrl:f,isLoading:i,isFiltered:d,onLoadMorePages:this.onLoadMorePages,onRefSelected:e,refs:l,renderRef:r,type:n})}}l.defaultProps={filter:""}})),r.register("5mZOL",(function(n,s){e(n.exports,"default",(function(){return c}));var a=r("9nHZC"),o=r("62zzi"),i=r("agjvf"),l=r("dEKDm"),f=r("iDQtz"),d=r("5PXri");class c extends a.PureComponent{constructor(...e){super(...e),this.renderRef=e=>{const r=this.props.renderRef(e);return t(a).cloneElement(r,{key:e.name,onClick:t=>{r.props.onClick&&r.props.onClick(t),this.props.onRefSelected(e)}})},this.onLoadMoreScrollHandler=(0,o.default)((e=>{const t=e.target,{nextPageUrl:r,isLoading:n,onLoadMorePages:s}=this.props;r&&!n&&t.scrollHeight-t.scrollTop<t.clientHeight+100&&s(r)}),200)}renderContents(){const{refs:e,type:r,isFiltered:n}=this.props;return"tag"===r&&0===e.length?n?t(a).createElement(i.FormattedMessage,d.default.noResultsTags):t(a).createElement(i.FormattedMessage,d.default.tagsEmptyState):"branch"===r&&0===e.length?t(a).createElement(i.FormattedMessage,d.default.noResultsBranches):e.map(((e,r)=>t(a).createElement(f.RefListItem,{key:r},this.renderRef(e))))}render(){const{isLoading:e,refs:r}=this.props;return!e||r&&0!==r.length?t(a).createElement(f.ScrollableContents,{onScroll:e=>{e.persist(),this.onLoadMoreScrollHandler(e)}},t(a).createElement(f.RefList,{role:"list"},this.renderContents()),t(a).createElement(f.SpinnerContainer,null,e&&t(a).createElement(l.default,{size:"medium"}))):t(a).createElement(f.LoadingContainer,null,t(a).createElement(l.default,{size:"medium"}))}}c.defaultProps={hasMore:!1,isLoading:!1,onLoadMorePages:()=>{},onRefSelected:()=>{},refs:[],renderRef:e=>t(a).createElement(f.RefButton,{appearance:"link"},e.name)}})),r.register("iDQtz",(function(t,n){e(t.exports,"LoadingContainer",(function(){return i})),e(t.exports,"SpinnerContainer",(function(){return l})),e(t.exports,"RefButton",(function(){return f})),e(t.exports,"RefList",(function(){return d})),e(t.exports,"RefListItem",(function(){return c})),e(t.exports,"ScrollableContents",(function(){return u}));var s=r("2xJU3"),a=r("EKmRU"),o=r("aP6k3");const i=(0,s.default)("div",{target:"eq214we0"})("display:flex;justify-content:center;align-items:center;margin:",(0,o.gridSize)(),"px;width:100%;min-height:70px;"),l=(0,s.default)(i,{target:"eq214we1"})("min-height:",4*(0,o.gridSize)(),"px;"),f=(0,s.default)(a.default,{target:"eq214we2"})({name:"l5nox8",styles:"&&{padding-left:0;text-align:left;}& span{margin-left:0;}"}),d=(0,s.default)("ul",{target:"eq214we3"})("list-style:none;padding-top:",(0,o.gridSize)(),"px;padding-left:0;"),c=(0,s.default)("li",{target:"eq214we4"})({name:"1oj327w",styles:"margin-top:0;a{display:block;}"}),u=(0,s.default)("div",{target:"eq214we5"})({name:"1t3a98l",styles:"min-height:86px;max-height:300px;overflow-y:auto;overflow-x:hidden;width:100%;"})})),r.register("5PXri",(function(t,n){e(t.exports,"default",(function(){return s}));var s=(0,r("agjvf").defineMessages)({branchesTab:{id:"frontbucket.repository.source.refSelector.branchesTab",defaultMessage:"Branches"},filterBranches:{id:"frontbucket.repository.source.refSelector.filterBranches",defaultMessage:"Filter branches"},filterTags:{id:"frontbucket.repository.source.refSelector.filterTags",defaultMessage:"Filter tags"},loadMore:{id:"frontbucket.repository.source.refSelector.loadMore",defaultMessage:"Load more"},noRefSelected:{id:"frontbucket.repository.source.refSelector.noRefSelected",defaultMessage:"Select a ref"},noResultsBranches:{id:"frontbucket.repository.source.refSelector.noResultsBranches",defaultMessage:"We can't find branches with that name."},tagsEmptyState:{id:"frontbucket.repository.source.refSelector.tagsEmptyState",defaultMessage:"There are no tags in this repository."},noResultsTags:{id:"frontbucket.repository.source.refSelector.noResultsTags",defaultMessage:"We can't find tags with that name."},refSourceLabel:{id:"frontbucket.repository.source.refSelector.refBranchLabel",defaultMessage:"source:"},tagsTab:{id:"frontbucket.repository.source.refSelector.tagsTab",defaultMessage:"Tags"}})}))}();
//# sourceMappingURL=route.c7acc90d.js.map
